<BookingScreen>:
    name: 'booking_screen'

    room_name_label: room_name_label
    booking_label: booking_label
    time_button_left: time_button_left
    time_button_right: time_button_right
    confirm_booking_button: confirm_booking_button
    cancel_booking_button: cancel_booking_button

    FloatLayout:
        id: booking_layout
        BoxLayout:
            canvas:
                Color:
                    rgba: 0,0,0,1
            padding: 10,10,10,10
            BoxLayout:
                orientation: 'vertical'
                padding: 10,10,10,10
                canvas:
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Label:
                    id: room_name_label
                    text: 'this is the room name'
                    size_hint_y: 0.2
                    font_size: 35
                    valign: "top"
                    halign: "left"
                    text_size: self.size

                BoxLayout:
                    orientation: 'horizontal'

                    StackLayout:
                        size_hint_x: 0.4

                        Label:
                            size_hint_y: 0.25

                        Label:
                            id: booking_label
                            text: 'Raum buchen:'
                            font_size: 35
                            size_hint_y: 0.15

                    StackLayout:
                        size_hint_x: 0.6

                        Label:
                            size_hint_y: 0.2

                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: 0.25

                            ToggleButton:
                                id: time_button_left
                                group: 'time_buttons'
                                font_size: 35
                                text: '30'

                            Label:
                                size_hint_x: 0.1

                            ToggleButton:
                                id: time_button_right
                                group: 'time_buttons'
                                font_size: 35
                                text: '60'

                        Label:
                            size_hint_y: 0.30

                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: 0.25

                            Button:
                                id: confirm_booking_button
                                font_size: 35
                                text: 'confirm'
                                on_release: root.book_room()
                                on_press: root.manager.current = 'pending_screen'

                            Label:
                                size_hint_x: 0.1

                            Button:
                                id: cancel_booking_button
                                font_size: 35
                                text: 'cancel'
                                on_press: root._exit()

<CancellationScreen>:
    name: 'cancellation_screen'

    room_name_label: room_name_label
    cancellation_label: cancellation_label
    confirm_cancellation_button: confirm_cancellation_button
    cancel_cancellation_button: cancel_cancellation_button

    FloatLayout:
        id: cancellation_layout
        BoxLayout:
            canvas:
                Color:
                    rgba: 0,0,0,1
            padding: 10,10,10,10
            BoxLayout:
                orientation: 'vertical'
                padding: 10,10,10,10
                canvas:
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Label:
                    id: room_name_label
                    text: 'this is the room name'
                    size_hint_y: 0.2
                    font_size: 35
                    valign: "top"
                    halign: "left"
                    text_size: self.size

                BoxLayout:
                    orientation: 'horizontal'

                    StackLayout:
                        size_hint_x: 0.4

                        Label:
                            size_hint_y: 0.25

                        Label:
                            id: cancellation_label
                            text: 'Terminate:'
                            font_size: 35
                            size_hint_y: 0.15

                    StackLayout:
                        size_hint_x: 0.6

                        Label:
                            size_hint_y: 0.2

                        BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: 0.25

                            Button:
                                id: confirm_cancellation_button
                                font_size: 35
                                text: 'ok'
                                on_release: root.cancel_appointment()
                                on_press: root.manager.current = 'pending_screen'

                            Label:
                                size_hint_x: 0.1

                            Button:
                                id: cancel_cancellation_button
                                font_size: 35
                                text: 'cancel'
                                on_press: root.manager.current = 'main_screen'

                        Label:
                            size_hint_y: 0.3

<MainScreen>:
    name: 'main_screen'

    #:import utils kivy.utils

    clock_label: clock_label
    date_label: date_label
    room_free_label: room_free_label
    main_layout: main_layout
    room_name_label: room_name_label
    capacity_label: capacity_label
    appointment_name_label: appointment_name_label
    appointment_time_label: appointment_time_label
    upcoming_appointment_label: upcoming_appointment_label
    touch_image: touch_image
    capacity_image: capacity_image
    no_connection_image: no_connection_image
    flames_image_left: flames_image_left
    flames_image_right: flames_image_right
    logo_image: logo_image

    FloatLayout:
        id: main_layout
        canvas.before:
            Color:
                rgba: root.red,root.green,root.blue,1
            Rectangle:
                size: self.size
                pos: self.pos
        BoxLayout:
            canvas:
                Color:
                    rgba: utils.get_color_from_hex('#11161f')
            padding: 10,10,10,10
            BoxLayout:
                orientation: 'vertical'
                padding: 10,10,10,10
                canvas:
                    Rectangle:
                        size: self.size
                        pos: self.pos
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: 0.2

                    Label:
                        id: room_name_label
                        size_hint_x: 0.8
                        font_size: 35
                        valign: "top"
                        halign: "left"
                        text_size: self.size
                        color: utils.get_color_from_hex('#ffffff')

                    Label:
                        size_hint_x: 0.06

                BoxLayout:
                    orientation: "horizontal"

                    StackLayout:
                        Label:
                            size_hint_y: 0.25

                        Label:
                            id: clock_label
                            font_size: 70
                            size_hint_y: 0.15
                            color: utils.get_color_from_hex('#ffffff')

                        Label:
                            id: date_label
                            font_size: 30
                            size_hint_y: 0.15
                            color: utils.get_color_from_hex('#ffffff')


                    StackLayout:
                        Label:
                            size_hint_y: 0.25

                        Label:
                            id: room_free_label
                            font_size: 70
                            size_hint_y: 0.15
                            color: utils.get_color_from_hex('#ffffff')

                        Label:
                            size_hint_y: 0.1

                        Label:
                            id: appointment_name_label
                            font_size: 25
                            size_hint_y: 0.1
                            color: utils.get_color_from_hex('#ffffff')

                        Label:
                            id: appointment_time_label
                            font_size: 25
                            size_hint_y: 0.1
                            color: utils.get_color_from_hex('#ffffff')

                        Label:
                            id: upcoming_appointment_label
                            font_size: 25
                            size_hint_y: 0.1
                            color: utils.get_color_from_hex('#ffffff')

        Label:
            id: capacity_label
            size_hint_x: 0.14
            text: ""
            font_size: 35
            pos: root.width - 135, 10
            text_size: self.size
            color: utils.get_color_from_hex('#ffffff')

        Image:
            id: logo_image
            source: 'mrd/ui/img/kuc-logo.png'
            size_hint: None, None
            size: 340, 190
            pos: root.width - 360, root.height - 145
            opacity: 0
        Image:
            id: touch_image
            source: 'mrd/ui/img/touch.png'
            size_hint: None, None
            size: 40, 40
            pos: 15, 15
            opacity: 0
        Image:
            id: capacity_image
            source: 'mrd/ui/img/capacity.png'
            size_hint: None, None
            size: 40, 40
            pos: root.width - 55, 15
            opacity: 0
        Image:
            id: no_connection_image
            source: 'mrd/ui/img/no-wifi.png'
            size_hint: None, None
            size: 40, 40
            pos: root.width - 60, root.height - 60
            opacity: 0
        Image:
            id: flames_image_left
            source: 'mrd/ui/img/flames.zip'
            size_hint: None, None
            anim_delay: 0.1
            width: 1000
            pos: -275, 10
            opacity: 0
        Image:
            id: flames_image_right
            source: 'mrd/ui/img/flames.zip'
            size_hint: None, None
            anim_delay: 0.1
            width: 1000
            pos: 75, 10
            opacity: 0

<NumPadScreen>:
    name: 'numpad_screen'
    room_name_label: room_name_label
	password_label: password_label
	cancel_button: cancel_button

    FloatLayout:
        id: numpad_layout
        BoxLayout:
            canvas:
                Color:
                    rgba: 0,0,0,1
            padding: 10,10,10,10
            BoxLayout:
                orientation: 'vertical'
                padding: 10,10,10,10
                canvas:
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Label:
                    id: room_name_label
                    size_hint_y: 0.2
                    font_size: 35
                    valign: 'top'
                    halign: 'left'
                    text_size: self.size

				BoxLayout:
					orientation: 'horizontal'
					size_hint_y: 0.8

					Label:
						size_hint_x: 0.15

					StackLayout:
						size_hint_x: 0.4

						Label:
							id: password_label
							size_hint_y: 0.15
							font_size: 30
							align: 'center'
							canvas.before:
								Color:
									rgba: 1,1,1,1
								Rectangle:
									pos: self.pos
									size: self.size
							color: (0, 0, 0, 1)

						Label:
							size_hint_y: 0.04

						BoxLayout:
							id: num_pad
							size_hint_y: 0.7

							StackLayout:
								size_hint_x: 0.3
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '1'
									on_release: root.add_digit(val=self.text)
								Label:
									size_hint_y: 0.04
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '4'
									on_release: root.add_digit(val=self.text)
								Label:
									size_hint_y: 0.04
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '7'
									on_release: root.add_digit(val=self.text)
								Label:
									size_hint_y: 0.04
								Button:
									size_hint_y: 0.22
									font_size: 30
									text: 'ok'
									on_release: root.handle_password(pw=root.password_label.text)

							Label:
								size_hint_x: 0.05

							StackLayout:
								size_hint_x: 0.3
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '2'
									on_release: root.add_digit(val=self.text)
								Label:
									size_hint_y: 0.04
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '5'
									on_release: root.add_digit(val=self.text)
								Label:
									size_hint_y: 0.04
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '8'
									on_release: root.add_digit(val=self.text)
								Label:
									size_hint_y: 0.04
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '0'
									on_release: root.add_digit(val=self.text)

							Label:
								size_hint_x: 0.05

							StackLayout:
								size_hint_x: 0.3
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '3'
									on_release: root.add_digit(val=self.text)
								Label:
									size_hint_y: 0.04
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '6'
									on_release: root.add_digit(val=self.text)
								Label:
									size_hint_y: 0.04
								Button:
									size_hint_y: 0.22
									font_size: 30
									align: 'center'
									text: '9'
									on_release: root.add_digit(val=self.text)
								Label:
									size_hint_y: 0.04
								Button:
									size_hint_y: 0.22
									font_size: 30
									background_color: (1,0,0,1)
									align: 'center'
									text: 'del'
									on_release: root.remove_digit()

						Label:
							size_hint_y: 0.11

					StackLayout:
						size_hint_x: 0.45

						Label:
						    size_hint_y: 0.75

						BoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: 0.25

                            Label:
                                size_hint_x: 0.55

                            Button:
                                id: cancel_button
                                font_size: 35
                                text: 'cancel'
                                on_press: root.manager.current = 'main_screen'

<PendingScreen>:
    name: 'pending_screen'

    room_name_label: room_name_label
    pending_label: pending_label

    FloatLayout:
        id: pending_layout
        BoxLayout:
            canvas:
                Color:
                    rgba: 0,0,0,1
            padding: 10,10,10,10
            BoxLayout:
                orientation: 'vertical'
                padding: 10,10,10,10
                canvas:
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Label:
                    id: room_name_label
                    text: 'this is the room name'
                    size_hint_y: 0.2
                    font_size: 35
                    valign: "top"
                    halign: "left"
                    text_size: self.size

                Label:
                    id: pending_label
                    text: 'pending ...'
                    size_hint_y: 0.6
                    font_size: 35
                    valign: "center"
                    halign: "center"
                    text_size: self.size

                Label:
                    size_hint_y: 0.2


<UnconfiguredScreen>:
    name: 'unconfigured_screen'
    display_heading: display_heading
    hostname_image: hostname_image
    configure_label: configure_label
    open_label: open_label

    FloatLayout:
        id: unconfigured_layout
        canvas.before:
            Color:
                rgba: 0,0,1,1
            Rectangle:
                size: self.size
                pos: self.pos
        BoxLayout:
            canvas:
                Color:
                    rgba: 0,0,0,1
            padding: 10,10,10,10
            BoxLayout:
                orientation: 'vertical'
                padding: 10,10,10,10
                canvas:
                    Rectangle:
                        size: self.size
                        pos: self.pos
        StackLayout:

            Label:
                id: display_heading
                size_hint_y: 0.2
                text: '[b]Welcome to MP Meeting Room Display[/b]'
                font_size: '30sp'
                valign: "center"
                markup: True

            Label:
                size_hint_y: 0.1

            Label:
                id: configure_label
                size_hint_y: 0
                text: '[i]To configure your new display connect to:[/i]'
                font_size: '20sp'
                markup: True

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.2

                Label:
                    size_hint_x: 0.25

                Image:
                    size_hint_x: 0.1
                    source: 'mrd/ui/img/wifi_logo.png'

                Label:
                    size_hint_x: 0.2
                    text: 'SSID:\nPW:'
                    font_size: '20sp'
                    halign: "right"

                Label:
                    size_hint_x: 0.2
                    text: root.ssid + '\n' + root.password
                    font_size: '20sp'

                Label:
                    size_hint_x: 0.25

            Label:
                size_hint_y: 0.1

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.2

                Label:
                    size_hint_x: 0.25

                Label:
                    id: open_label
                    size_hint_x: 0.3
                    halign: "right"
                    font_size: '20sp'
                    markup: True

                Image:
                    id: hostname_image
                    size_hint_x: 0.2
                    source: 'mrd/ui/img/hostname_qr.png'
                    halign: "center"

                Label:
                    size_hint_x: 0.25

            Label:
                size_hint_y: 0.05
